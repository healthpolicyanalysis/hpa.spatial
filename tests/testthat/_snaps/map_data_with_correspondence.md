# problem case from unmet needs is fixed

    Code
      df_sample
    Output
          SA2_CODE_2021 PrtcpntCnt  ReportDte
      1       509031250      45.00 2022-09-30
      2       310031291     219.00 2020-03-31
      3       506021118     202.00 2020-12-31
      4       116031314     118.00 2020-03-31
      5       801041117       0.00 2022-12-31
      6       401051019     154.00 2020-03-31
      7       403041086     335.00 2022-09-30
      8       307011175      39.00 2020-09-30
      9       314011386     422.00 2022-03-31
      10      128021538     361.00 2021-09-30
      11      309051243      77.00 2020-06-30
      12      404021098       0.00 2022-09-30
      13      115041301     187.35 2023-03-31
      14      107031142     201.00 2020-09-30
      15      213011333     306.00 2020-12-31
      16      406011132      23.00 2020-03-31
      17      505011079     142.00 2022-06-30
      18      103021067     239.00 2021-12-31
      19      105031101     368.00 2019-06-30
      20      124031463     157.00 2020-06-30
      21      106041126     427.00 2023-03-31
      22      212021293     251.00 2019-12-31
      23      118011339     128.00 2021-06-30
      24      101041021      30.00 2019-06-30
      25      406021141      22.00 2022-09-30
      26      505011071     163.00 2020-09-30
      27      211011447     412.00 2021-12-31
      28      107031143     376.00 2019-06-30
      29      111021215     376.00 2022-06-30
      30      209011197     466.00 2022-12-31
      31      303021058     105.00 2021-09-30
      32      801051049      20.16 2021-12-31
      33      405031123      84.00 2023-03-31
      34      307021180     132.00 2021-12-31
      35      302011025     160.00 2023-03-31
      36      104021089     418.00 2020-03-31
      37      117021636     148.72 2019-12-31
      38      801071079      65.00 2020-03-31
      39      316031426     153.00 2021-06-30
      40      306021146     169.00 2021-12-31
      41      501031020      55.00 2019-06-30
      42      401031012     142.00 2022-12-31
      43      128021608     113.00 2020-09-30
      44      504031064       0.00 2020-06-30
      45      216031418      84.00 2021-06-30
      46      801051060      53.00 2020-06-30
      47      901031003       2.01 2021-12-31
      48      506031130       0.25 2022-06-30
      49      315011403      23.00 2020-03-31
      50      506011111       0.07 2023-03-31
      51      701021019     128.00 2020-12-31
      52      319011496     175.00 2021-03-31
      53      214011370     401.00 2020-03-31
      54      212051321     180.00 2019-09-30
      55      901031003       0.59 2019-12-31
      56      505021301     183.85 2022-09-30
      57      506031126       0.06 2022-03-31
      58      505031104     217.00 2022-03-31
      59      702041062      32.00 2022-06-30
      60      702011048     116.00 2020-12-31
      61      313021364      59.00 2019-09-30
      62      213041573     115.93 2021-09-30
      63      309091263     183.00 2020-06-30
      64      801011022      60.00 2020-06-30
      65      308041528      99.00 2020-12-31
      66      127021511     292.00 2020-06-30
      67      217011420      90.00 2019-06-30
      68      127031730      58.99 2022-03-31
      69      801091108      34.00 2022-12-31
      70      315011403      41.00 2020-09-30
      71      511031283      63.00 2022-06-30
      72      801091110      43.00 2020-03-31
      73      103041078     465.00 2020-09-30
      74      119041381     297.00 2022-12-31
      75      212041459     313.00 2022-12-31
      76      204031072      92.00 2020-03-31
      77      311051324      67.00 2020-03-31
      78      301011005      54.00 2020-09-30
      79      312021358     151.00 2020-03-31
      80      801091104      46.00 2021-06-30
      81      503011036     177.00 2021-12-31
      82      506031125     133.00 2021-09-30
      83      207011520      90.71 2019-09-30
      84      309011226     158.00 2020-06-30
      85      303031060      98.00 2019-06-30
      86      504031056     258.00 2019-06-30
      87      206051129     140.00 2021-12-31
      88      211051282     116.00 2019-12-31
      89      511011275       2.92 2019-06-30
      90      511041285     293.00 2022-03-31
      91      405021119     230.00 2021-06-30
      92      127011593      87.00 2020-06-30
      93      122021691     123.80 2021-06-30
      94      302021027     115.00 2019-12-31
      95      304041102       0.00 2021-12-31
      96      217031476      41.00 2021-03-31
      97      107041548     164.00 2019-06-30
      98      316081549     386.00 2021-12-31
      99      506041134     546.00 2022-06-30
      100     216011410      73.00 2021-06-30

---

    Code
      x
    Output
      # A tibble: 39,264 x 3
         SA2_CODE_2021 PrtcpntCnt ReportDte 
         <chr>              <dbl> <date>    
       1 101021007           27   2019-06-30
       2 101021008          165   2019-06-30
       3 101021009          171   2019-06-30
       4 101021010           61   2019-06-30
       5 101021012          119   2019-06-30
       6 101021610           16.2 2019-06-30
       7 101021611          151.  2019-06-30
       8 101031013           31   2019-06-30
       9 101031014          150   2019-06-30
      10 101031015           31   2019-06-30
      # i 39,254 more rows

# using multiple groups works

    Code
      df_sample
    Output
         sa3_code_2011 test_outcome grp1 grp2
      1          10201        -1.34    B    c
      2          10303        -0.66    B    d
      3          10202         0.59    E    a
      4          10104        -1.45    E    d
      5          10102        -0.36    D    a
      6          10503        -1.20    E    e
      7          10402         1.26    A    c
      8          10102         1.43    E    a
      9          10302         0.04    D    d
      10         10201         0.55    D    b
      11         10201         0.25    D    a
      12         10402         1.00    E    a
      13         10302         1.48    A    a
      14         10104         0.71    E    b
      15         10502        -1.10    E    a
      16         10201         1.09    C    b
      17         10501         0.70    A    a
      18         10201        -0.58    B    b
      19         10304        -1.20    A    e
      20         10304        -0.27    E    c
      21         10201        -1.94    E    b
      22         10501        -0.03    C    e
      23         10201         0.37    A    b
      24         10304         1.25    E    b
      25         10302        -1.50    C    a
      26         10302        -0.52    D    a
      27         10303         0.43    D    d
      28         10103         0.08    B    a
      29         10302        -0.35    E    d
      30         10303        -0.23    A    a
      31         10501        -0.97    B    d
      32         10202         2.06    E    e
      33         10101        -0.01    A    c
      34         10101        -0.80    A    b
      35         10301         0.50    E    d
      36         10501         2.05    A    d
      37         10302         0.39    E    e
      38         10202        -1.25    B    c
      39         10202        -1.15    B    b
      40         10104         2.33    D    d
      41         10402        -0.73    D    a
      42         10304         0.95    D    e
      43         10402        -1.38    A    e
      44         10502         0.05    A    a
      45         10102        -0.18    B    c
      46         10201         0.40    A    a
      47         10401        -0.47    D    d
      48         10202        -1.20    D    a
      49         10102         0.59    A    c
      50         10202         0.33    D    b
      51         10303         0.34    B    a
      52         10101        -1.24    E    b
      53         10301         2.04    E    c
      54         10104         0.48    B    b
      55         10201        -2.13    B    d
      56         10201         0.29    B    a
      57         10104         0.61    A    b
      58         10103         0.90    C    a
      59         10103         0.45    B    e
      60         10201        -0.96    B    e
      61         10401        -0.27    B    a
      62         10503         0.19    E    c
      63         10103        -0.99    D    c
      64         10402        -0.94    C    a
      65         10402         1.25    D    b
      66         10401        -0.39    B    c
      67         10202         1.17    C    a
      68         10501         1.02    E    d
      69         10301        -0.08    A    d
      70         10201        -0.28    C    d
      71         10202        -0.65    A    d
      72         10101         1.29    D    a
      73         10402         0.24    E    b
      74         10201         0.20    D    c
      75         10303        -1.07    E    e
      76         10202        -2.00    B    d
      77         10102        -1.07    B    a
      78         10402        -0.02    E    e
      79         10104        -0.01    D    a
      80         10202        -1.05    E    c
      81         10101        -0.53    B    b
      82         10302        -0.13    D    c
      83         10104        -1.75    C    d
      84         10301         0.11    B    c
      85         10202         1.11    B    e
      86         10402         1.35    C    d
      87         10104         0.15    C    a
      88         10101        -0.47    A    a
      89         10202        -0.19    A    b
      90         10102         0.16    A    e
      91         10201         0.70    D    e

---

    Code
      x
    Output
      # A tibble: 91 x 4
         sa3_code_2011 test_outcome grp1  grp2 
         <chr>                <dbl> <chr> <chr>
       1 10101                -0.47 A     a    
       2 10201                 0.4  A     a    
       3 10302                 1.48 A     a    
       4 10303                -0.23 A     a    
       5 10501                 0.7  A     a    
       6 10502                 0.05 A     a    
       7 10102                -1.07 B     a    
       8 10103                 0.08 B     a    
       9 10201                 0.29 B     a    
      10 10303                 0.34 B     a    
      # i 81 more rows

---

    Code
      df_sample
    Output
         sa3_code_2011 test_outcome g1 g2
      1          10201        -1.34  B  c
      2          10303        -0.66  B  d
      3          10202         0.59  E  a
      4          10104        -1.45  E  d
      5          10102        -0.36  D  a
      6          10503        -1.20  E  e
      7          10402         1.26  A  c
      8          10102         1.43  E  a
      9          10302         0.04  D  d
      10         10201         0.55  D  b
      11         10201         0.25  D  a
      12         10402         1.00  E  a
      13         10302         1.48  A  a
      14         10104         0.71  E  b
      15         10502        -1.10  E  a
      16         10201         1.09  C  b
      17         10501         0.70  A  a
      18         10201        -0.58  B  b
      19         10304        -1.20  A  e
      20         10304        -0.27  E  c
      21         10201        -1.94  E  b
      22         10501        -0.03  C  e
      23         10201         0.37  A  b
      24         10304         1.25  E  b
      25         10302        -1.50  C  a
      26         10302        -0.52  D  a
      27         10303         0.43  D  d
      28         10103         0.08  B  a
      29         10302        -0.35  E  d
      30         10303        -0.23  A  a
      31         10501        -0.97  B  d
      32         10202         2.06  E  e
      33         10101        -0.01  A  c
      34         10101        -0.80  A  b
      35         10301         0.50  E  d
      36         10501         2.05  A  d
      37         10302         0.39  E  e
      38         10202        -1.25  B  c
      39         10202        -1.15  B  b
      40         10104         2.33  D  d
      41         10402        -0.73  D  a
      42         10304         0.95  D  e
      43         10402        -1.38  A  e
      44         10502         0.05  A  a
      45         10102        -0.18  B  c
      46         10201         0.40  A  a
      47         10401        -0.47  D  d
      48         10202        -1.20  D  a
      49         10102         0.59  A  c
      50         10202         0.33  D  b
      51         10303         0.34  B  a
      52         10101        -1.24  E  b
      53         10301         2.04  E  c
      54         10104         0.48  B  b
      55         10201        -2.13  B  d
      56         10201         0.29  B  a
      57         10104         0.61  A  b
      58         10103         0.90  C  a
      59         10103         0.45  B  e
      60         10201        -0.96  B  e
      61         10401        -0.27  B  a
      62         10503         0.19  E  c
      63         10103        -0.99  D  c
      64         10402        -0.94  C  a
      65         10402         1.25  D  b
      66         10401        -0.39  B  c
      67         10202         1.17  C  a
      68         10501         1.02  E  d
      69         10301        -0.08  A  d
      70         10201        -0.28  C  d
      71         10202        -0.65  A  d
      72         10101         1.29  D  a
      73         10402         0.24  E  b
      74         10201         0.20  D  c
      75         10303        -1.07  E  e
      76         10202        -2.00  B  d
      77         10102        -1.07  B  a
      78         10402        -0.02  E  e
      79         10104        -0.01  D  a
      80         10202        -1.05  E  c
      81         10101        -0.53  B  b
      82         10302        -0.13  D  c
      83         10104        -1.75  C  d
      84         10301         0.11  B  c
      85         10202         1.11  B  e
      86         10402         1.35  C  d
      87         10104         0.15  C  a
      88         10101        -0.47  A  a
      89         10202        -0.19  A  b
      90         10102         0.16  A  e
      91         10201         0.70  D  e

---

    Code
      x
    Output
      # A tibble: 91 x 4
         sa3_code_2011 test_outcome g1    g2   
         <chr>                <dbl> <chr> <chr>
       1 10101                -0.47 A     a    
       2 10201                 0.4  A     a    
       3 10302                 1.48 A     a    
       4 10303                -0.23 A     a    
       5 10501                 0.7  A     a    
       6 10502                 0.05 A     a    
       7 10102                -1.07 B     a    
       8 10103                 0.08 B     a    
       9 10201                 0.29 B     a    
      10 10303                 0.34 B     a    
      # i 81 more rows

# mapping using user-provided polygons

    Code
      df_sample
    Output
                                    LHN_Name values
      1                   Southern Melbourne  12.05
      2                    Northern Adelaide   6.33
      3         Australian Capital Territory  -0.42
      4                               Loddon   5.23
      5                   Central Queensland   4.75
      6                     North West (Qld)   1.73
      7                             Goulburn   5.98
      8                   Yorke and Northern   6.68
      9                 South Western Sydney  11.17
      10                     Limestone Coast  -2.51
      11                    Central Adelaide   5.52
      12                   Western Melbourne -16.36
      13                      Western Sydney   2.53
      14                  Wimmera South West   2.43
      15                    South West (Qld)   2.34
      16                  Hunter New England -14.61
      17                              Mackay  -2.82
      18                              Barwon   6.55
      19                     Outer Gippsland  -4.25
      20                      Sunshine Coast  -9.46
      21                              Mallee  -2.01
      22                              Sydney  -2.94
      23                        Southern NSW   4.75
      24                        Murrumbidgee   2.47
      25                     Brimbank Melton   1.77
      26                   Southern Adelaide   4.04
      27             North Eastern Melbourne  -8.05
      28                   Metro North (Qld) -11.19
      29                               WACHS -15.39
      30               Nepean Blue Mountains -13.84
      31                     Torres and Cape   2.51
      32               Mid North Coast (NSW)   2.60
      33                  Central West (Qld)  -0.01
      34                        Far West NSW  -2.94
      35             Inner Eastern Melbourne   2.49
      36                          Townsville  -2.30
      37                 Central Coast (NSW)  -2.95
      38                   Bayside Peninsula  -2.04
      39                        Ovens Murray  -6.20
      40                   Metro South (Qld)  -8.75
      41                        West Moreton  -3.75
      42                          East Metro   3.05
      43                     Northern Sydney  -0.35
      44                South Eastern Sydney  -6.49
      45              Barossa Hills Fleurieu   5.59
      46                     Inner Gippsland   2.21
      47                         North Metro   4.58
      48            Riverland Mallee Coorong  -5.86
      49            Tasmanian Health Service  -1.61
      50                            Wide Bay  -0.60
      51                Illawarra Shoalhaven   2.80
      52                         Western NSW   4.44
      53                       Hume Moreland  -6.45
      54               Cairns and Hinterland   1.17
      55                       Darling Downs   1.08
      56             Outer Eastern Melbourne  -3.95
      57                        Northern NSW   0.25
      58                          Gold Coast   2.28
      59                         South Metro  -0.15
      60            Flinders and Upper North   1.91
      61                   Central Highlands  -2.36
      62 NT Regional Health Services (NTRHS)  -5.92
      63                  Eyre and Far North   5.10

---

    Code
      x
    Output
      # A tibble: 63 x 2
         LHN_Name                     values
         <chr>                         <dbl>
       1 Australian Capital Territory  -0.42
       2 Barossa Hills Fleurieu         5.59
       3 Barwon                         6.55
       4 Bayside Peninsula             -2.04
       5 Brimbank Melton                1.77
       6 Cairns and Hinterland          1.17
       7 Central Adelaide               5.52
       8 Central Coast (NSW)           -2.95
       9 Central Highlands             -2.36
      10 Central Queensland             4.75
      # i 53 more rows

# test mapping with custom geo

    Code
      df_sample
    Output
                                    LHN_Name values
      1                   Southern Melbourne   1.11
      2                    Northern Adelaide   1.44
      3         Australian Capital Territory   3.86
      4                               Loddon  -3.13
      5                   Central Queensland  -0.65
      6                     North West (Qld)   1.45
      7                             Goulburn  -1.26
      8                   Yorke and Northern   0.82
      9                 South Western Sydney   1.12
      10                     Limestone Coast  -0.78
      11                    Central Adelaide  -1.02
      12                   Western Melbourne  -0.21
      13                      Western Sydney   0.57
      14                  Wimmera South West  -1.62
      15                    South West (Qld)  -0.47
      16                  Hunter New England  -3.88
      17                              Mackay  -1.36
      18                              Barwon  -1.04
      19                     Outer Gippsland  -0.43
      20                      Sunshine Coast  -1.37
      21                              Mallee  -0.43
      22                              Sydney   0.44
      23                        Southern NSW   1.70
      24                        Murrumbidgee  -0.24
      25                     Brimbank Melton  -0.10
      26                   Southern Adelaide  -0.67
      27             North Eastern Melbourne  -0.38
      28                   Metro North (Qld)  -5.24
      29                               WACHS   1.72
      30               Nepean Blue Mountains  -1.52
      31                     Torres and Cape   0.97
      32               Mid North Coast (NSW)   1.21
      33                  Central West (Qld)  -0.05
      34                        Far West NSW  -4.16
      35             Inner Eastern Melbourne   1.52
      36                          Townsville  -2.59
      37                 Central Coast (NSW)   1.42
      38                   Bayside Peninsula  -1.42
      39                        Ovens Murray  -0.87
      40                   Metro South (Qld)   3.13
      41                        West Moreton   1.93
      42                          East Metro  -1.75
      43                     Northern Sydney   3.97
      44                South Eastern Sydney   2.15
      45              Barossa Hills Fleurieu   1.03
      46                     Inner Gippsland  -3.67
      47                         North Metro   2.49
      48            Riverland Mallee Coorong  -0.47
      49            Tasmanian Health Service  -1.63
      50                            Wide Bay   0.16
      51                Illawarra Shoalhaven  -0.62
      52                         Western NSW   1.57
      53                       Hume Moreland  -1.89
      54               Cairns and Hinterland   2.74
      55                       Darling Downs   0.45
      56             Outer Eastern Melbourne  -1.62
      57                        Northern NSW   1.70
      58                          Gold Coast   0.26
      59                         South Metro  -3.09
      60            Flinders and Upper North  -1.11
      61                   Central Highlands   4.25
      62 NT Regional Health Services (NTRHS)   0.99
      63                  Eyre and Far North  -0.79

---

    Code
      x
    Output
      # A tibble: 63 x 2
         LHN_Name                     values
         <chr>                         <dbl>
       1 Australian Capital Territory   3.86
       2 Barossa Hills Fleurieu         1.03
       3 Barwon                        -1.04
       4 Bayside Peninsula             -1.42
       5 Brimbank Melton               -0.1 
       6 Cairns and Hinterland          2.74
       7 Central Adelaide              -1.02
       8 Central Coast (NSW)            1.42
       9 Central Highlands              4.25
      10 Central Queensland            -0.65
      # i 53 more rows

# mapping using created correspondence tables when abs ones aren't available

    Code
      df_sample
    Output
                                    LHN_Name values
      1                   Southern Melbourne   9.80
      2                    Northern Adelaide  -4.33
      3         Australian Capital Territory   8.83
      4                               Loddon   5.26
      5                   Central Queensland  -6.87
      6                     North West (Qld)   2.05
      7                             Goulburn  -5.15
      8                   Yorke and Northern   1.71
      9                 South Western Sydney   7.73
      10                     Limestone Coast   1.96
      11                    Central Adelaide   0.49
      12                   Western Melbourne  -8.94
      13                      Western Sydney  -1.65
      14                  Wimmera South West   9.22
      15                    South West (Qld)  -0.57
      16                  Hunter New England  -9.77
      17                              Mackay   1.70
      18                              Barwon -10.14
      19                     Outer Gippsland  -7.00
      20                      Sunshine Coast   5.33
      21                              Mallee  -0.68
      22                              Sydney -11.82
      23                        Southern NSW   4.41
      24                        Murrumbidgee  -0.60
      25                     Brimbank Melton -10.00
      26                   Southern Adelaide  -5.41
      27             North Eastern Melbourne  15.48
      28                   Metro North (Qld)   4.62
      29                               WACHS  -2.68
      30               Nepean Blue Mountains   4.98
      31                     Torres and Cape  -0.63
      32               Mid North Coast (NSW)   3.50
      33                  Central West (Qld)  -0.77
      34                        Far West NSW   0.00
      35             Inner Eastern Melbourne  -2.05
      36                          Townsville   5.10
      37                 Central Coast (NSW)  -1.21
      38                   Bayside Peninsula  -7.96
      39                        Ovens Murray   2.01
      40                   Metro South (Qld)   3.67
      41                        West Moreton  -5.89
      42                          East Metro   6.18
      43                     Northern Sydney -11.01
      44                South Eastern Sydney  12.06
      45              Barossa Hills Fleurieu  -2.56
      46                     Inner Gippsland  -3.08
      47                         North Metro -13.86
      48            Riverland Mallee Coorong   3.91
      49            Tasmanian Health Service  -3.59
      50                            Wide Bay   9.84
      51                Illawarra Shoalhaven  -4.94
      52                         Western NSW   0.18
      53                       Hume Moreland  -4.15
      54               Cairns and Hinterland  -4.33
      55                       Darling Downs   5.65
      56             Outer Eastern Melbourne   5.05
      57                        Northern NSW  -0.55
      58                          Gold Coast  -0.61
      59                         South Metro -13.06
      60            Flinders and Upper North   5.37
      61                   Central Highlands  -8.69
      62 NT Regional Health Services (NTRHS)   8.78
      63                  Eyre and Far North  -0.62

---

    Code
      x
    Output
      # A tibble: 63 x 2
         LHN_Name                     values
         <chr>                         <dbl>
       1 Australian Capital Territory   8.83
       2 Barossa Hills Fleurieu        -2.56
       3 Barwon                       -10.1 
       4 Bayside Peninsula             -7.96
       5 Brimbank Melton              -10   
       6 Cairns and Hinterland         -4.33
       7 Central Adelaide               0.49
       8 Central Coast (NSW)           -1.21
       9 Central Highlands             -8.69
      10 Central Queensland            -6.87
      # i 53 more rows

# grouping works

    Code
      df_sample
    Output
          sa3_code_2011 values grp1
      1           20903  -0.84    B
      2           31301  -0.35    B
      3           60105   0.57    D
      4           50703   0.05    B
      5           40504  -0.82    D
      6           10503   1.35    D
      7           60402   0.70    E
      8           12501  -1.03    D
      9           20502   2.06    B
      10          31305  -1.28    A
      11          40304   0.28    B
      12          21305   0.27    C
      13          11503   1.09    C
      14          11603   0.64    E
      15          31106   1.25    C
      16          30404  -0.94    A
      17          70201  -1.45    D
      18          50603  -0.52    C
      19          31301  -0.77    C
      20          20203  -1.25    D
      21          10503  -0.13    B
      22          20602   2.04    E
      23          40302   0.00    A
      24          31103  -0.06    C
      25          10805  -1.39    A
      26          20504   0.71    C
      27          30602  -1.66    C
      28          10304  -0.12    A
      29          30503  -0.23    B
      30          10801   1.19    B
      31          30102   2.57    E
      32          11203   0.47    B
      33          40203  -2.00    D
      34          50704   0.09    D
      35          70203  -0.83    D
      36          21602  -0.97    D
      37          70203  -0.63    A
      38          40103  -1.07    B
      39          10802  -0.48    E
      40          10103   0.43    E
      41          10804   0.35    A
      42          21101   0.06    C
      43          11701  -1.20    E
      44          10903   0.03    A
      45          21101   0.45    D
      46          12703  -0.48    D
      47          50901  -1.85    C
      48          80108  -0.19    D
      49          60401   0.61    C
      50          10302  -0.15    A
      51          30201  -1.34    C
      52          10401  -0.66    B
      53          10104   0.38    E
      54          50803   2.05    A
      55          30303  -0.78    C
      56          21205  -1.59    E
      57          40503   0.48    D
      58          30801   0.05    C
      59          40602  -0.47    B
      60          40401  -0.39    A
      61          50901  -0.12    B
      62          10101  -0.76    C
      63          11602   1.30    A
      64          30907   0.73    C
      65          70102  -0.15    A
      66          20605  -2.27    C
      67          20604   0.82    A
      68          21501  -0.28    C
      69          40403   0.76    D
      70          12403   0.15    E
      71          40203  -0.84    B
      72          50805   0.19    C
      73          31106  -0.07    D
      74          80109  -0.96    B
      75          50703  -1.11    E
      76          20903  -2.70    A
      77          50103   0.39    C
      78          80109   0.48    D
      79          21701   0.83    B
      80          20505   1.38    D
      81          30602  -1.31    A
      82          31202  -0.15    E
      83          30301  -1.68    B
      84          20904   1.89    D
      85          11802  -0.57    E
      86          31002   0.84    C
      87          12504  -0.53    C
      88          20302   0.70    A
      89          21401   0.95    B
      90          21503   0.81    B
      91          90103   1.48    B
      92          50403  -1.20    A
      93          80105  -0.22    B
      94          30701   0.86    B
      95          10704  -0.27    D
      96          80107   0.04    B
      97          11004   0.04    D
      98          10201   0.50    C
      99          60102  -0.29    D
      100         50602  -0.03    D

---

    Code
      x
    Output
      # A tibble: 183 x 3
         sa3_code_2011 values grp1 
         <chr>          <dbl> <chr>
       1 10202          -0.85 A    
       2 10302          -0.15 A    
       3 10304          -0.12 A    
       4 10804           0.35 A    
       5 10805          -1.39 A    
       6 10903           0.03 A    
       7 11302          -1.38 A    
       8 11401          -0.34 A    
       9 11602           1.3  A    
      10 12302          -0.48 A    
      # i 173 more rows

# aggregating up SA's works

    Code
      df_sample
    Output
          sa3_code_2011 values
      1           12703   1.48
      2           20605  -0.47
      3           40602   0.19
      4           20903   1.26
      5           40304   0.59
      6           31106  -0.69
      7           90103  -0.41
      8           31304  -0.17
      9           12504   0.04
      10          11201   0.25
      11          20803  -0.94
      12          30303  -2.70
      13          21602   0.05
      14          50703   0.15
      15          30703   1.38
      16          10805  -0.84
      17          40602   0.05
      18          30907  -0.57
      19          30801   1.20
      20          31502  -1.63
      21          12302  -0.19
      22          70204  -0.29
      23          11302   1.09
      24          50603  -0.77
      25          30703  -1.24
      26          10202   1.69
      27          50601   0.75
      28          30102   0.87
      29          30602   0.16
      30          10104   0.84
      31          20502   0.52
      32          12403  -1.20
      33          80101  -1.58
      34          50401   1.15
      35          12403   2.04
      36          40304  -0.76
      37          40403  -1.24
      38          50805  -0.77
      39          40103  -0.15
      40          11703  -1.38
      41          20703   1.35
      42          80107  -0.15
      43          60102   0.61
      44          50901   0.67
      45          10201  -1.75
      46          30302  -0.19
      47          70201   0.73
      48          70102  -0.83
      49          10302   0.86
      50          31701   0.04
      51          31501   0.10
      52          31001   0.04
      53          50806  -0.53
      54          31004   2.46
      55          10103  -0.23
      56          30503   0.57
      57          40203   0.48
      58          12203  -0.65
      59          50903  -1.11
      60          11602   0.33
      61          30504   0.05
      62          50704  -0.07
      63          20903   1.00
      64          20904  -1.38
      65          10401   0.64
      66          11701   2.06
      67          10802  -0.28
      68          30404   0.06
      69          20703  -0.02
      70          40304  -0.42
      71          60103   0.28
      72          21304  -1.10
      73          50803  -1.39
      74          30906  -1.66
      75          10804   0.70
      76          31602   0.00
      77          70203  -0.45
      78          50901  -0.02
      79          20401  -1.07
      80          70203   1.19
      81          10903  -1.59
      82          70204   0.83
      83          20502  -0.17
      84          31103  -0.82
      85          40302  -1.25
      86          50805  -1.31
      87          31301  -0.12
      88          30102  -0.38
      89          10701  -0.58
      90          20203  -0.35
      91          20302  -0.52
      92          21305   0.05
      93          11503  -2.00
      94          21202   0.70
      95          20504  -0.66
      96          11401   0.59
      97          21205  -0.97
      98          40304  -1.03
      99          21402   0.19
      100         50703   0.99

---

    Code
      x
    Output
      # A tibble: 200 x 2
         sa3_code_2011 values
         <chr>          <dbl>
       1 10101           0.9 
       2 10103          -0.23
       3 10104           0.84
       4 10201          -1.75
       5 10202           1.69
       6 10302           0.86
       7 10304          -0.15
       8 10304          -1.45
       9 10401           0.64
      10 10402           0.48
      # i 190 more rows

---

    Code
      df_sample
    Output
          sa3_code_2011 values
      1           20504   0.95
      2           21104   0.31
      3           21601  -0.34
      4           80103  -0.44
      5           50403   0.76
      6           89797   1.69
      7           50605   0.46
      8           20302   1.42
      9           11901   0.54
      10          21401  -0.54
      11          31503  -0.16
      12          30907  -0.62
      13          40203  -0.07
      14          11501  -1.14
      15          40701  -2.96
      16          40304   1.23
      17          50704  -0.70
      18          12703   1.39
      19          60301  -2.01
      20          12102  -0.35
      21          40202   0.21
      22          10301  -1.45
      23          30502   1.27
      24          12405  -1.16
      25          31004  -0.48
      26          31802  -2.37
      27          10201  -1.19
      28          20802   0.69
      29          31401  -0.85
      30          12801   0.01
      31          70102  -0.72
      32          12202   1.11
      33          20101   0.43
      34          11004   0.42
      35          11801  -2.36
      36          50501   2.16
      37          10304   1.14
      38          12502   0.79
      39          21202  -0.64
      40          30603   0.79
      41          11401   1.67
      42          50703  -0.46
      43          50601   1.37
      44          21301   0.40
      45          10202   0.45
      46          31402   0.93
      47          20601  -1.09
      48          31501  -0.07
      49          30803  -0.65
      50          30802   1.10
      51          80102  -0.10
      52          12003  -0.83
      53          10302   0.36
      54          31902   2.12
      55          10104  -1.77
      56          50502  -0.91
      57          11603  -1.23
      58          31202  -1.90
      59          40702  -1.77
      60          10704   0.66
      61          12702  -1.08
      62          50701   1.72
      63          12403   2.55
      64          60402  -0.72
      65          21503  -1.47
      66          12201   0.49
      67          30102  -0.16
      68          10701  -0.36
      69          12501  -0.71
      70          11103   1.31
      71          40101  -0.86
      72          31102   0.12
      73          50401  -0.71
      74          60203   1.60
      75          30301  -0.45
      76          20701   0.13
      77          31002   0.15
      78          31105   0.47
      79          20703   0.84
      80          50402  -0.11
      81          30103   1.15
      82          10901   1.33
      83          20606   0.06
      84          20607  -0.03
      85          12401   1.93
      86          20903  -2.40
      87          30504   0.73
      88          11201  -3.88
      89          20103   2.07
      90          30402   0.04
      91          21502   0.54
      92          50902   1.11
      93          50102  -0.24
      94          80108   0.20
      95          20303  -0.49
      96          60103   0.17
      97          21103   0.57
      98          12504  -0.77
      99          10102  -1.69
      100         80101   0.24

---

    Code
      x
    Output
      # A tibble: 150 x 2
         sa3_code_2011 values
         <chr>          <dbl>
       1 10102          -1.69
       2 10104          -1.77
       3 10201          -1.19
       4 10202           0.45
       5 10301          -1.45
       6 10302           0.36
       7 10303          -0.27
       8 10304           1.14
       9 10701          -0.36
      10 10704           0.66
      # i 140 more rows

# mapping across SAs and editions together works

    Code
      df_sample
    Output
          sa3_code_2016 random_vals
      1           12703        1.48
      2           20605       -0.47
      3           40602        0.19
      4           20903        1.26
      5           40304        0.59
      6           31106       -0.69
      7           90103       -0.41
      8           31304       -0.17
      9           12504        0.04
      10          11201        0.25
      11          20803       -0.94
      12          30303       -2.70
      13          21602        0.05
      14          50703        0.15
      15          30703        1.38
      16          10805       -0.84
      17          40602        0.05
      18          30907       -0.57
      19          30801        1.20
      20          31502       -1.63
      21          12302       -0.19
      22          70204       -0.29
      23          11302        1.09
      24          50603       -0.77
      25          30703       -1.24
      26          10202        1.69
      27          50601        0.75
      28          30102        0.87
      29          30602        0.16
      30          10105        0.84
      31          20502        0.52
      32          12403       -1.20
      33          80101       -1.58
      34          50401        1.15
      35          12403        2.04
      36          40304       -0.76
      37          40403       -1.24
      38          50901       -0.77
      39          40103       -0.15
      40          11703       -1.38
      41          20703        1.35
      42          80107       -0.15
      43          60102        0.61
      44          51103        0.67
      45          10201       -1.75
      46          30302       -0.19
      47          70201        0.73
      48          70102       -0.83
      49          10302        0.86
      50          31701        0.04
      51          31501        0.10
      52          31001        0.04
      53          50903       -0.53
      54          31004        2.46
      55          10104       -0.23
      56          30503        0.57
      57          40203        0.48
      58          12203       -0.65
      59          51104       -1.11
      60          11602        0.33
      61          30504        0.05
      62          50704       -0.07
      63          20903        1.00
      64          20904       -1.38
      65          10401        0.64
      66          11701        2.06
      67          10802       -0.28
      68          30404        0.06
      69          20703       -0.02
      70          40304       -0.42
      71          60103        0.28
      72          21304       -1.10
      73          50901       -1.39
      74          30906       -1.66
      75          10804        0.70
      76          31602        0.00
      77          70203       -0.45
      78          51002       -0.02
      79          20401       -1.07
      80          70203        1.19
      81          10903       -1.59
      82          70204        0.83
      83          20502       -0.17
      84          31103       -0.82
      85          40302       -1.25
      86          50901       -1.31
      87          31301       -0.12
      88          30102       -0.38
      89          10701       -0.58
      90          20203       -0.35
      91          20302       -0.52
      92          21305        0.05
      93          11503       -2.00
      94          21202        0.70
      95          20504       -0.66
      96          11401        0.59
      97          21205       -0.97
      98          40304       -1.03
      99          21402        0.19
      100         50703        0.99

---

    Code
      x
    Output
      # A tibble: 200 x 2
         sa3_code_2016 random_vals
         <chr>               <dbl>
       1 10103                0.9 
       2 10104               -0.23
       3 10105                0.84
       4 10201               -1.75
       5 10202                1.69
       6 10302                0.86
       7 10304               -0.15
       8 10304               -1.45
       9 10401                0.64
      10 10402                0.48
      # i 190 more rows

---

    Code
      df_sample
    Output
          sa3_code_2016 values
      1           12502   1.48
      2           20202  -0.47
      3           40504   0.19
      4           20606   1.26
      5           31902   0.59
      6           30803  -0.69
      7           89797  -0.41
      8           31002  -0.17
      9           12405   0.04
      10          11201   0.25
      11          20604  -0.94
      12          21304  -2.70
      13          20904   0.05
      14          50401   0.15
      15          30103   1.38
      16          11103  -0.84
      17          40601   0.05
      18          30303  -0.57
      19          30202   1.20
      20          31102  -1.63
      21          12104  -0.19
      22          70101  -0.29
      23          11401   1.09
      24          50401  -0.77
      25          30102  -1.24
      26          10201   1.69
      27          50201   0.75
      28          21103   0.87
      29          21503   0.16
      30          10104   0.84
      31          12702   0.52
      32          12201  -1.20
      33          70104  -1.58
      34          40703   1.15
      35          12202   2.04
      36          31802  -0.76
      37          40202  -1.24
      38          50502  -0.77
      39          31401  -0.15
      40          11901  -1.38
      41          20303   1.35
      42          80107  -0.15
      43          50703   0.61
      44          50603   0.67
      45          10201  -1.75
      46          21301  -0.19
      47          60203   0.73
      48          60104  -0.83
      49          10201   0.86
      50          31202   0.04
      51          31004   0.10
      52          30402   0.04
      53          50503  -0.53
      54          30502   2.46
      55          10104  -0.23
      56          21401   0.57
      57          31501   0.48
      58          12102  -0.65
      59          50701  -1.11
      60          11802   0.33
      61          21502   0.05
      62          50402  -0.07
      63          20605   1.00
      64          20701  -1.38
      65          10302   0.64
      66          11901   2.06
      67          10901  -0.28
      68          21401   0.06
      69          20504  -0.02
      70          31905  -0.42
      71          50704   0.28
      72          20902  -1.10
      73          50403  -1.39
      74          30301  -1.66
      75          11004   0.70
      76          31105   0.00
      77          60402  -0.45
      78          50601  -0.02
      79          12504  -1.07
      80          70101   1.19
      81          11103  -1.59
      82          70101   0.83
      83          12702  -0.17
      84          30504  -0.82
      85          31601  -1.25
      86          50501  -1.31
      87          30805  -0.12
      88          21005  -0.38
      89          10704  -0.58
      90          12503  -0.35
      91          12504  -0.52
      92          20903   0.05
      93          11801  -2.00
      94          20703   0.70
      95          12801  -0.66
      96          11501   0.59
      97          20802  -0.97
      98          31802  -1.03
      99          20903   0.19
      100         50401   0.99

---

    Code
      x
    Output
      # A tibble: 200 x 2
         sa3_code_2016 values
         <chr>          <dbl>
       1 10102           0.9 
       2 10104          -0.23
       3 10104           0.84
       4 10201          -1.75
       5 10201           1.69
       6 10201           0.86
       7 10202          -0.15
       8 10301          -1.45
       9 10302           0.64
      10 10303           0.48
      # i 190 more rows

---

    Code
      df_sample
    Output
          sa3_code_2016 values
      1           20504   0.38
      2           21104   1.18
      3           21601   0.25
      4           70104   0.04
      5           50201  -0.29
      6           89797   1.82
      7           50503  -2.11
      8           20302  -0.84
      9           11901  -1.03
      10          21401   1.30
      11          31402  -1.05
      12          30805   2.54
      13          40102   0.15
      14          11501  -0.08
      15          40504  -0.24
      16          40202  -0.83
      17          50605   0.43
      18          12703   0.28
      19          60402   0.87
      20          12102  -0.34
      21          40101   0.99
      22          10301  -1.10
      23          31003   0.48
      24          31606  -0.45
      25          10201  -5.24
      26          20802  -1.59
      27          31202  -1.60
      28          12801  -0.05
      29          80108   0.88
      30          12202  -0.02
      31          20101  -0.81
      32          11004   0.37
      33          11801   0.55
      34          50601  -0.48
      35          10304  -1.09
      36          12502   0.16
      37          21202   0.16
      38          30603   2.85
      39          11401  -2.09
      40          50704   0.86
      41          50701  -1.31
      42          21301   2.46
      43          10202  -0.94
      44          31305  -0.07
      45          20601   0.82
      46          31401   1.35
      47          30804   0.00
      48          30803   0.27
      49          80104  -1.38
      50          12003   1.62
      51          10302  -0.06
      52          51104  -0.17
      53          10104  -1.50
      54          50603   0.05
      55          11603   2.04
      56          31503  -0.27
      57          50102   0.24
      58          10704  -1.39
      59          12702   0.52
      60          50703  -0.22
      61          12403   0.37
      62          31802   1.02
      63          21503   0.89
      64          12201   1.09
      65          30102  -0.96
      66          30502   0.71
      67          10701   0.72
      68          12501   0.13
      69          11103   0.01
      70          40304  -0.71
      71          40601  -1.20
      72          30401   0.64
      73          50501  -0.78
      74          40602   0.00
      75          30504   0.09
      76          20701   2.22
      77          31201   1.30
      78          70101  -1.98
      79          20703  -0.23
      80          50502  -0.12
      81          30303  -0.28
      82          10901  -0.40
      83          20606   0.05
      84          20607   0.03
      85          12401   0.64
      86          20903   2.19
      87          31002  -0.73
      88          50402  -1.20
      89          60103   0.47
      90          40702  -0.15
      91          30203  -0.19
      92          12504  -0.39
      93          10102   0.76
      94          60104   0.43
      95          10903   0.39
      96          31105  -1.28
      97          31905   0.67
      98          21103   1.00
      99          40701  -1.45
      100         31801   1.19

---

    Code
      x
    Output
      # A tibble: 154 x 2
         sa3_code_2016 values
         <chr>          <dbl>
       1 10102           0.76
       2 10104          -1.5 
       3 10201          -5.24
       4 10202          -0.94
       5 10301          -1.1 
       6 10302          -0.06
       7 10303          -1.63
       8 10304          -1.09
       9 10701           0.72
      10 10704          -1.39
      # i 144 more rows

# mapping data works

    Code
      df_sample
    Output
          SA2_MAINCODE_2016 values
      1           308051537   0.45
      2           305031123   0.33
      3           310021277  -0.39
      4           205041094   1.17
      5           799999499  -0.11
      6           307011177   1.06
      7           312021352  -0.61
      8           702011045  -1.14
      9           119011356   1.19
      10          405031122   0.19
      11          108041165   0.59
      12          509011228   0.99
      13          213041359   1.28
      14          204011061  -0.25
      15          311061332   0.75
      16          215011392   0.91
      17          302011022  -0.99
      18          604021088  -0.10
      19          205021081   1.00
      20          402031038  -1.25
      21          212051320  -0.51
      22          113011259  -1.02
      23          313011363  -0.34
      24          125031481  -0.23
      25          312021347   1.71
      26          801091110   2.23
      27          115031299   0.10
      28          312011341  -0.41
      29          212021453  -1.13
      30          301021007  -0.39
      31          315011397   0.02
      32          402031037  -0.14
      33          208031187   0.66
      34          215031405  -1.24
      35          205021086   0.63
      36          113021262   0.97
      37          107011545   0.18
      38          316021421  -0.50
      39          303021052  -0.84
      40          119031374  -1.64
      41          302031040   0.63
      42          510021267  -0.10
      43          206021110   0.46
      44          702031061  -0.02
      45          127021517  -1.72
      46          102011033   1.04
      47          801071084  -0.64
      48          105031103  -1.00
      49          901031003  -1.66
      50          801051060   0.49
      51          313051378   0.72
      52          501031018   0.38
      53          103041076   0.58
      54          506031126  -1.22
      55          401031012  -0.55
      56          101031016   0.64
      57          315021406   1.15
      58          313041374   0.82
      59          301021013   3.50
      60          104011082   0.26
      61          601031017  -0.92
      62          509011230  -1.34
      63          214011374   0.52
      64          117011325   1.81
      65          406021143   0.21
      66          107041549   0.70
      67          404011090  -0.47
      68          105031100   0.65
      69          302011024  -1.37
      70          104021091   1.39
      71          304041103  -2.03
      72          208021180  -1.17
      73          505031107   1.35
      74          801011011   0.54
      75          311061334   0.07
      76          406021141   1.70
      77          511031282  -0.47
      78          122031427  -0.56
      79          306031161  -0.79
      80          203021044  -1.26
      81          216021411   1.31
      82          402021034   0.63
      83          308011190   0.35
      84          504031067   0.59
      85          509031250  -0.90
      86          116021563  -0.07
      87          125011587  -2.46
      88          403041075   0.92
      89          702041063   0.79
      90          209041220   0.20
      91          511041289   0.34
      92          310041300  -1.96
      93          801061066   0.47
      94          101041025   1.90
      95          509011232  -0.36
      96          207031163  -1.00
      97          205021083  -0.63
      98          215031403   1.24
      99          801081091   0.16
      100         209031214   0.17

---

    Code
      x
    Output
      # A tibble: 2,214 x 2
         SA2_MAINCODE_2016 values
         <chr>              <dbl>
       1 101051539           1.37
       2 101051540          -0.56
       3 101061541           0.36
       4 101061542           0.63
       5 101061543           0.4 
       6 101061544          -0.11
       7 101021007           1.51
       8 101021008          -0.09
       9 101021009           2.02
      10 101021010          -0.06
      # i 2,204 more rows

---

    Code
      df_sample
    Output
          SA2_MAINCODE_2016 values
      1           305041135  14.00
      2           303021056  11.00
      3           308031222  17.00
      4           204011056  17.00
      5           604031096  11.00
      6           305011110  13.00
      7           310031284  14.00
      8           603021071  15.00
      9           118011345   8.00
      10          402051052  19.00
      11          108041162   7.00
      12          507011153  12.00
      13          212031300  12.00
      14          202011023  19.65
      15          309091265  15.00
      16          213011331  11.00
      17          215011391  15.00
      18          601031015  20.00
      19          203021043  16.00
      20          319011497   9.00
      21          211031266  16.00
      22          112031551   2.02
      23          310031295   9.00
      24          124031461  15.00
      25          310021279  20.00
      26          801111141  17.12
      27          115011553   3.94
      28          310011273  18.00
      29          210051248  16.00
      30          214011376  21.00
      31          801011023  15.00
      32          311061329  13.00
      33          801061069  11.00
      34          319011496  11.00
      35          207011149  13.00
      36          213021344  20.00
      37          203031048  22.00
      38          113011257  15.00
      39          107011131  17.00
      40          312021353  11.01
      41          217011420  10.00
      42          119011360  13.00
      43          216011408  19.00
      44          506061143  13.00
      45          204031072  15.00
      46          604021087  10.00
      47          125041493  18.00
      48          102011033  11.00
      49          801071089   7.00
      50          105031103  18.00
      51          901031003  22.00
      52          702021056  24.00
      53          311021310   8.00
      54          405031120  14.00
      55          103041076  20.00
      56          504021053  16.00
      57          318021471  15.00
      58          101041022  16.00
      59          312011338  13.00
      60          311021306  17.00
      61          214021382  14.00
      62          104011082  23.00
      63          509011227  15.00
      64          507011155  16.00
      65          212041314  13.00
      66          116031314  17.00
      67          403041073  17.00
      68          107041147  15.00
      69          401061021  14.00
      70          105031100  10.00
      71          215011393  16.00
      72          104021091  15.00
      73          302031036  13.11
      74          206071142  20.00
      75          503011034  16.00
      76          701011007  14.00
      77          309091541   9.51
      78          403041071  17.00
      79          506031126  14.00
      80          121031407  12.00
      81          304031094  15.00
      82          201011006  16.00
      83          213031350  19.00
      84          319011493  10.00
      85          305031123  19.00
      86          407031168  16.00
      87          507041177  16.00
      88          115041302  13.00
      89          124011454  26.00
      90          401021006  12.00
      91          604021089  16.00
      92          208021182  22.00
      93          506051138  19.00
      94          309021233  11.00
      95          801071071  13.00
      96          101061542  10.01
      97          507011159  14.00
      98          206041125   6.00
      99          203021045  20.00
      100         213021342  13.00

---

    Code
      x
    Output
      # A tibble: 2,303 x 2
         SA2_MAINCODE_2016 values
         <chr>              <dbl>
       1 101021007             14
       2 101021008             22
       3 101021009             14
       4 101021010             20
       5 101021011             23
       6 101021012              9
       7 101031013             20
       8 101031014             18
       9 101031015             18
      10 101031016             16
      # i 2,293 more rows

---

    Code
      df_sample
    Output
        SA2_MAINCODE_2016 values
      1         107011545   4.82
      2         107041549   5.51
      3         107041548   4.49
      4         107011547   1.57
      5         107011546   3.62

---

    Code
      x
    Output
      # A tibble: 5 x 2
        SA2_MAINCODE_2016 values
        <chr>              <dbl>
      1 107011545           4.82
      2 107011546           3.62
      3 107011547           1.57
      4 107041548           4.49
      5 107041549           5.51

---

    Code
      df_sample
    Output
        SA2_MAINCODE_2016 values
      1         107011545      5
      2         107041549      6
      3         107041548      4
      4         107011547      2
      5         107011546      4

---

    Code
      x
    Output
      # A tibble: 5 x 2
        SA2_MAINCODE_2016 values
        <chr>              <dbl>
      1 107011545              5
      2 107011546              4
      3 107011547              2
      4 107041548              4
      5 107041549              6

