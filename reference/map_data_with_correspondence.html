<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Map data between editions using correspondence tables from the ABS."><title>Map data between editions using correspondence tables from the ABS. — map_data_with_correspondence • hpa.spatial</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Map data between editions using correspondence tables from the ABS. — map_data_with_correspondence"><meta property="og:description" content="Map data between editions using correspondence tables from the ABS."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">hpa.spatial</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.9.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Map data between editions using correspondence tables from the ABS.</h1>
      
      <div class="d-none name"><code>map_data_with_correspondence.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Map data between editions using correspondence tables from the ABS.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">map_data_with_correspondence</span><span class="op">(</span></span>
<span>  .data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">codes</span>,</span>
<span>  <span class="va">values</span>,</span>
<span>  groups <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  from_area <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  from_year <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  from_geo <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  to_area <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  to_year <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  to_geo <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  mb_geo <span class="op">=</span> <span class="fu"><a href="get_mb21_pop.html">get_mb21_pop</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  value_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"units"</span>, <span class="st">"aggs"</span><span class="op">)</span>,</span>
<span>  export_fname <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  round <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  seed <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>.data</dt>
<dd><p>a <code>data.frame</code>(-like) object. Can be passed if codes,
values or groups are passed by reference (like in <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">dplyr::mutate()</a></code>).</p></dd>


<dt>codes</dt>
<dd><p>codes representing locations relevant to the <code>from_area</code>.
SA1 or SA2, for example.</p></dd>


<dt>values</dt>
<dd><p>values associated with codes to be alloocated to newly mapped
codes.</p></dd>


<dt>groups</dt>
<dd><p>values associated with codes/values specifying a grouping
structure. For example, if there are codes/values for several age groups,
then groups will be the grouping variable for the age group associated with
the code and value of the same position. Defaults to <code>NULL</code> (no
grouping).</p></dd>


<dt>from_area</dt>
<dd><p>The area you want to correspond FROM (ie the areas your data
are currently in). For example: "sa1", "sa2, "sa3", "sa4".</p></dd>


<dt>from_year</dt>
<dd><p>The year you want to correspond FROM. For example: 2011,
2016.</p></dd>


<dt>from_geo</dt>
<dd><p>The FROM polygon geography. Helpful if it is not available
using <code>from_year</code> and <code>from_area</code> in <code>get_polygon</code>.</p></dd>


<dt>to_area</dt>
<dd><p>The area you want to correspond TO (ie the areas you want your
data to be in).</p></dd>


<dt>to_year</dt>
<dd><p>The year you want to correspond TO.</p></dd>


<dt>to_geo</dt>
<dd><p>The TO polygon geography. Helpful if it is not available
using <code>to_year</code> and <code>to_area</code> in <code>get_polygon</code>.</p></dd>


<dt>mb_geo</dt>
<dd><p>an <code>{sf}</code> POINT object where the points are the centroids
of a small area (intended to be mesh blocks but can be any other space that's
small enough to be useful. Should also include a column, <code>Person</code>,
with the population within that area. Defaults to use Mesh Blocks (2021) and
with 2021 census data. See <code><a href="get_mb21_pop.html">get_mb21_pop()</a></code>.</p></dd>


<dt>value_type</dt>
<dd><p>Whether the data are unit level or aggregate level data.
Unit level data is randomly allocated to new locations based on proportions
in the correspondence table, aggregate data is dispersed based on the
proportion across the (potentially multiple) mapped codes.</p></dd>


<dt>export_fname</dt>
<dd><p>The file name for the saved correspondence table file
(applicable if <code>from_geo</code>) and <code>to_geo</code> are used instead of areas
and years).</p></dd>


<dt>round</dt>
<dd><p>Whether or not to round the resulting mapped values to be whole
numbers (maybe be useful when mapping count, aggregate values which may
otherwise return decimal values in the mapped areas).</p></dd>


<dt>seed</dt>
<dd><p>A random seed (integer). May be useful for ensuring mappings of
unit level data are reproducible (as these use the mapping probabilities
for randomly allocating observations to the new geographies and may be
different between runs with the same data/inputs).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A <code>data.frame</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">map_data_with_correspondence</span><span class="op">(</span></span></span>
<span class="r-in"><span>  codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">107011130</span>, <span class="fl">107041149</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  from_area <span class="op">=</span> <span class="st">"sa2"</span>,</span></span>
<span class="r-in"><span>  from_year <span class="op">=</span> <span class="fl">2011</span>,</span></span>
<span class="r-in"><span>  to_area <span class="op">=</span> <span class="st">"sa2"</span>,</span></span>
<span class="r-in"><span>  to_year <span class="op">=</span> <span class="fl">2016</span>,</span></span>
<span class="r-in"><span>  value_type <span class="op">=</span> <span class="st">"units"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   SA2_MAINCODE_2016 values</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 107011545             10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 107041549             10</span>
<span class="r-in"><span><span class="fu">map_data_with_correspondence</span><span class="op">(</span></span></span>
<span class="r-in"><span>  codes <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">107011130</span>, <span class="fl">107041149</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  values <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">10</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  from_area <span class="op">=</span> <span class="st">"sa2"</span>,</span></span>
<span class="r-in"><span>  from_year <span class="op">=</span> <span class="fl">2011</span>,</span></span>
<span class="r-in"><span>  to_area <span class="op">=</span> <span class="st">"sa2"</span>,</span></span>
<span class="r-in"><span>  to_year <span class="op">=</span> <span class="fl">2016</span>,</span></span>
<span class="r-in"><span>  value_type <span class="op">=</span> <span class="st">"aggs"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 5 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   SA2_MAINCODE_2016 values</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> 107011545           4.82</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> 107011546           3.62</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> 107011547           1.57</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> 107041548           4.49</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> 107041549           5.51</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Rex Parsons.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

